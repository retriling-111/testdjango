{% extends 'base.html' %}
{% block content %}
<div class="container py-3" style="max-width: 600px;">
    <h5 class="fw-bold mb-3 text-center">Friends ({{ friends.count }})</h5>

    <form method="GET" class="mb-4">
        <div class="input-group bg-white rounded-pill border px-3 py-1 shadow-sm">
            <i class="bi bi-search d-flex align-items-center text-muted me-2"></i>
            <input type="text" name="q" class="form-control border-0 shadow-none bg-transparent"
                   placeholder="Search by Name or Talk ID..." value="{{ query }}">
        </div>
    </form>

    <div class="list-group list-group-flush shadow-sm rounded-4 overflow-hidden border">
        {% for friend in friends %}
        <a href="{% url 'profile_view' friend.username %}" class="list-group-item list-group-item-action d-flex align-items-center p-3 border-0">
            <img src="{{ friend.profile.profile_pic.url }}" class="rounded-circle me-3"
                 style="width: 50px; height: 50px; object-fit: cover; border: 0.5px solid var(--ios-border);">

            <div class="flex-grow-1">
                <span class="fw-bold d-block">
                    {{ friend.username }}
                    {% with user_profile=friend.profile %}
                        {% include 'includes/role_badge.html' %}
                    {% endwith %}
                </span>
                <span class="text-muted small">@{{ friend.profile.talk_id }}</span>
            </div>

            <i class="bi bi-chevron-right text-muted"></i>
        </a>
        {% empty %}
        <div class="p-5 text-center">
            <i class="bi bi-people text-muted" style="font-size: 2rem;"></i>
            <p class="text-muted mt-2">No friends found.</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}